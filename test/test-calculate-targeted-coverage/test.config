import nextflow.util.SysHelper

params {
    work_dir = '/scratch/\$SLURM_JOB_ID'
    save_intermediate_files = true
    patient = 'TCEB1'
    project_id = 'test'
    sample_mode = 'single'

    calculate_targeted_coverage {
            reference_dict = '/hot/ref/reference/GRCh38-BI-20160721/Homo_sapiens_assembly38.dict'
            reference_dbSNP = '/hot/ref/database/dbSNP-155/thinned/GRCh38/dbSNP-155_thinned_hg38.vcf.gz'
            genome_sizes = '/hot/ref/reference/GRCh38-BI-20160721/Homo_sapiens_assembly38.fasta.fai'
            target_bed = '/hot/software/pipeline/metapipeline-DNA/Nextflow/development/input/data/targeted-coverage/small.bed' //required
            bait_bed = '' //optional, path/to/bait/bedfile
            collect_metrics = true // whether or not to calculate coverage metrics
            off_target_depth = true //whether or not to calculate depth at off-target dbSNP loci
            output_enriched_target_file = true // whether or not to output a new target file containing high-coverage off-target dbSNP loci
            target_depth = true // whether or not to calculate per-base depth in target regions
            //samtools_depth_extra_args = ''
    }

    arg_map = [:]
    params.calculate_targeted_coverage.each{ param_key, param_value -> {
            arg_map[param_key] = param_value
        }
    }
    params.calculate_targeted_coverage.metapipeline_arg_map = arg_map
    params.pipeline_status_directory = "/scratch/${System.getenv('SLURM_JOB_ID')}/PIPELINESTATUSDIRECTORY"
    params.metapipeline_log_output_dir = "${params.output_dir}/log-test-calculate-targeted-coverage"

    params.sample_data = [
        '9422N': [
            'patient': 'TCEB1_RCC_S00',
            'state': 'normal',
            'recalibrate-BAM': ['BAM':'/hot/software/pipeline/metapipeline-DNA/Nextflow/development/meta-germline-somatic/systematic_tests/call-gSNP/inputs/TCEB1/TCEB1_RCC_S00-9422N-079-114.bam', 'contamination_table':'']
        ]
    ]

    params.pipeline_predecessor = [
        'calculate-targeted-coverage': 'recalibrate-BAM',
        'call-gSNP': 'recalibrate-BAM',
        'call-gSV': 'recalibrate-BAM',
        'call-mtSNV': 'recalibrate-BAM',
        'call-sSNV': 'recalibrate-BAM',
        'call-sSV': 'recalibrate-BAM'
    ]
}
